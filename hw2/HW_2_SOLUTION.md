Пытаемся подняться, падаем:
![[Pasted image 20251228141804.png]]

Меняем образ на актуальный, поднимаемся:
![[Pasted image 20251228141954.png]]
![[Pasted image 20251228142227.png]]

Делаем топик командой из задания:
``` shell
docker run -it --rm --network kafka-kraft-cluster_default confluentinc/cp-kafka:latest kafka-topics \
--create \
--topic test_topic \
--bootstrap-server kafka01:9092,kafka02:9092,kafka03:9092 \
--partitions 8 \
--replication-factor 3 \
--if-not-exists
```

Идем в веб-морду, проверяем, что все ок:
![[Pasted image 20251228142346.png]]
![[Pasted image 20251228142402.png]]


#### Нагрузочное тестирование
Запускаем нагрузочное тестирование командой из задания:
![[Pasted image 20251228142530.png]]
Средний RPS 182982.6
Средняя пропускная способность 174.51 Мб/с
Latency:
- средняя - 103 мс
- максимальная - 466 мс
- P50 - 32 мс
- P95 - 333 мс
- P99 - 387 мс
- P99.9 - 458 мс

Производительность выглядит ок, сообщения попали на все три брокера:
![[Pasted image 20251228142834.png]]

#### Отказоустойчивость
Запустили скрипт, убедились, что сообщения летят
![[Pasted image 20251228143356.png]]
Контроллер на третьем брокере:
![[Pasted image 20251228143411.png]]

Убиваем третьего брокера:
![[Pasted image 20251228143552.png]]

Проверяем статус:
![[Pasted image 20251228143617.png]]
![[Pasted image 20251228143627.png]]Брокер отвалился, но сообщения все еще летят. Убиваем второго брокера:
![[Pasted image 20251228143805.png]]
Топики не грузит. 

В логах первого брокера сообщения о попытках подключения к двум другим:
![[Pasted image 20251228143907.png]]

Восстанавливаем убитых:
![[Pasted image 20251228144037.png]]

Сообщения полетели:
![[Pasted image 20251228144048.png]]
![[Pasted image 20251228144056.png]]
Работоспособность восстановлена, данные консистентны. 